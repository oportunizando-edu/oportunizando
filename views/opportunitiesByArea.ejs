<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oportunidade por área</title>
    <!--Adicionar o Tailwind usando o cdn-->
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  
    <main class="flex flex-col mx-8 gap-6">
        <h1 class="text-4xl text-[#442F72] font-bold m-8 self-center">
            Opportunidades em: <%= areaTitle.charAt(0).toUpperCase() + areaTitle.slice(1) %>
        </h1>

        <!--Card de oportunidades-->
        <div class="flex-wrap gap-6">
        <% opportunities.forEach( opportunity => {%>
            <div class="bg-[#FAFAFA] p-2 rounded-md border border-black-1/2 w-full sm:w-1/2">
                <div class="flex justify-between mx-4">
                    <div>
                        <h2 class="text-3xl text-[#442F72] font-bold p-2 pb-0">
                            <%= opportunity.title.charAt(0).toUpperCase() + opportunity.title.slice(1) %>
                        </h2>
                        <%if (opportunity.local) { %>
                            <div class="flex justify-evenly items-center text-sm font-bold">
                                <img src="/img/local.png" alt="Símbolo de local">
                                <p><%= opportunity.local %></p>
                            </div>
                        <%}%>
                    </div>
                    <div class="flex flex-col items-end justify-center gap-2 p-2">
                        <% if(opportunity.is_open){ %>
                            <div class="bg-[#3C9E4F] rounded-md text-white font-bold flex justify-center w-fit p-1 px-3">
                                Aberto
                            </div>
                        <% } else { %>
                            <div class="bg-[#FF3F42] rounded-md text-white font-bold flex justify-center w-fit p-1 px-3">
                                Fechado
                            </div>
                        <% } %>
                        <div class="break-normal text-right">
                            <!--Formatar para a data normal no Brasil -->
                            Data limite: <span class="font-bold"><%= new Intl.DateTimeFormat('pt-BR').format(opportunity.deadline) %></span>
                        </div>
                    </div>
                </div>
                <p class="mx-6 my-3 mb-6 line-clamp-3 text-base">
                    <%= opportunity.description %>
                </p>
                <div class="flex justify-between">
                    <% if(opportunity.benefits){ %>
                        <div class="flex flex-col justify-evenly mx-6">
                            <h3 class="text-lg font-bold text-[#4A2E88]">
                                Benefícios
                            </h3>
                            <ul class="list-disc mx-5">
                                <% const benefits = opportunity.benefits.split("\n"); %>
                                <% if(benefits.length < 3 ){%>
                                    <% benefits.forEach( benefit => { %>
                                        <li><%= benefit%></li>
                                    <% }) %>
                                <% } else { %>
                                        <% for(let i = 0; i < 3; i++){ %>
                                            <li><%= benefits[i] %></li>
                                        <% } %>
                                    <span class="font-bold text-[#442F72]">...</span>
                                <% } %>
                            </ul>
                        </div>
                    <%}%>
                    <% if(opportunity.requirements){%>
                        <div class="flex flex-col justify-evenly mx-8">
                            <h3 class="text-lg font-bold text-[#4A2E88]">
                                Requisitos
                            </h3>
                            <ul class="list-disc mx-5">
                                <% const requirements = opportunity.requirements.split("\n"); %>
                                <% if(requirements.length < 4 ){%>
                                    <% requirements.forEach( requirement => { %>
                                        <li><%= requirement%></li>
                                    <% }) %>
                                <% } else { %>
                                        <% for(let i = 0; i < 3; i++){ %>
                                            <li><%= requirements[i] %></li>
                                        <% } %>
                                    <span class="font-bold text-[#442F72]">...</span>
                                <% } %>
                            </ul>
                        </div>
                    <% } %>
                </div>
                <a href="opportunity/<%= opportunity.id %>"
                    class="flex justify-center bg-[#5F37B5] text-white font-bold rounded-md mx-8 my-4 py-2">
                    Ver mais
                </a>
            </div>
        <% })%>
        </div>
    </main>
    
</body>
</html>